{"ast":null,"code":"import _defineProperty from \"/home/raja/Documents/PM2/mern_blog/bloggy-master/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/raja/Documents/PM2/mern_blog/bloggy-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/raja/Documents/PM2/mern_blog/bloggy-master/client/src/containers/auth/SignUpPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { registerUser } from \"../../actions/authActions\";\nimport { clearErrors } from \"../../actions/errorActions\";\nimport Validate from \"../../components/form/Validate\";\nimport SignUp from \"../../components/auth/SignUp\";\n\nconst SignUpPage = ({\n  history,\n  registerUser,\n  auth,\n  errors,\n  clearErrors\n}) => {\n  const _useState = useState({\n    user_name: \"\",\n    email: \"\",\n    password: \"\",\n    errors: {}\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1]; // clearing error incase user switches to login page while already having errors in login page\n\n\n  useEffect(() => {\n    const unlisten = history.listen(() => clearErrors());\n    return () => unlisten();\n  }, [history, clearErrors]);\n  useEffect(() => {\n    if (auth.isAuthenticated) history.push(\"/blog\");\n    setUser(user => {\n      return _objectSpread({}, user, {\n        errors\n      });\n    });\n  }, [errors, auth, history]);\n\n  const handleChange = e => {\n    setUser(_objectSpread({}, user, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleBlur = e => {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n    const err = _objectSpread({}, user.errors, {}, Validate(name, value).errors);\n\n    setUser(_objectSpread({}, user, {\n      errors: _objectSpread({}, err)\n    }));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const user_name = user.user_name,\n          email = user.email,\n          password = user.password;\n    registerUser({\n      user_name,\n      email,\n      password\n    }, history);\n  };\n\n  return React.createElement(SignUp, {\n    loading: auth.userLoading,\n    user: _objectSpread({}, user),\n    onBlur: handleBlur,\n    onChange: handleChange,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  });\n};\n\nSignUpPage.propTypes = {\n  registerUser: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps, {\n  registerUser,\n  clearErrors\n})(SignUpPage);","map":{"version":3,"sources":["/home/raja/Documents/PM2/mern_blog/bloggy-master/client/src/containers/auth/SignUpPage.js"],"names":["React","useState","useEffect","PropTypes","connect","registerUser","clearErrors","Validate","SignUp","SignUpPage","history","auth","errors","user_name","email","password","user","setUser","unlisten","listen","isAuthenticated","push","handleChange","e","target","name","value","handleBlur","err","handleSubmit","preventDefault","userLoading","propTypes","func","isRequired","object","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { registerUser } from \"../../actions/authActions\";\nimport { clearErrors } from \"../../actions/errorActions\";\nimport Validate from \"../../components/form/Validate\";\nimport SignUp from \"../../components/auth/SignUp\";\n\nconst SignUpPage = ({ history, registerUser, auth, errors, clearErrors }) => {\n   const [user, setUser] = useState({\n      user_name: \"\",\n      email: \"\",\n      password: \"\",\n      errors: {}\n   });\n\n   // clearing error incase user switches to login page while already having errors in login page\n   useEffect(() => {\n      const unlisten = history.listen(() => clearErrors());\n      return () => unlisten();\n   }, [history, clearErrors]);\n\n   useEffect(() => {\n      if (auth.isAuthenticated) history.push(\"/blog\");\n      setUser(user => {\n         return { ...user, errors };\n      });\n   }, [errors, auth, history]);\n\n   const handleChange = e => {\n      setUser({\n         ...user,\n         [e.target.name]: e.target.value\n      });\n   };\n\n   const handleBlur = e => {\n      const { name, value } = e.target;\n      const err = { ...user.errors, ...Validate(name, value).errors };\n      setUser({ ...user, errors: { ...err } });\n   };\n\n   const handleSubmit = e => {\n      e.preventDefault();\n      const { user_name, email, password } = user;\n      registerUser({ user_name, email, password }, history);\n   };\n\n   return (\n      <SignUp\n         loading={auth.userLoading}\n         user={{ ...user }}\n         onBlur={handleBlur}\n         onChange={handleChange}\n         onSubmit={handleSubmit}\n      />\n   );\n};\n\nSignUpPage.propTypes = {\n   registerUser: PropTypes.func.isRequired,\n   clearErrors: PropTypes.func.isRequired,\n   auth: PropTypes.object.isRequired,\n   errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n   auth: state.auth,\n   errors: state.errors\n});\n\nexport default connect(\n   mapStateToProps,\n   { registerUser, clearErrors }\n)(SignUpPage);\n"]},"metadata":{},"sourceType":"module"}